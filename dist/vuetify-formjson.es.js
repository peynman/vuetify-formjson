import e from"tree-model";import t from"jsoneditor";import i from"vuetify-image-input";import l from"axios";function s(e,t,i,l,s,n,o,a,r,d){"boolean"!=typeof o&&(r=a,a=o,o=!1);const c="function"==typeof i?i.options:i;let p;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),l&&(c._scopeId=l),n?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=p):t&&(p=o?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),p)if(c.functional){const e=c.render;c.render=function(t,i){return p.call(i),e(t,i)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,p):[p]}return i}const n=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("vf-fields-renderer",{attrs:{options:e.options,id:e.formId,fields:e.fields},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}})},staticRenderFns:[]},void 0,{name:"vuetify-formjson",props:{id:String,fields:Object,value:Object,options:Object},data(){return{devalue:this.value}},computed:{formId:function(){return this.id?this.id:"vuetify-formjson-#"+1e4*Math.random()}},watch:{devalue:{deep:!0,handler:function(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),o={id:{type:"input",input:"text",label:"ID",class:"col-12 ma-0 ps-0 pe-0",updateKeyCodes:[13]},label:{type:"input",input:"text",label:"Label",class:"col-12 ma-0 ps-0 pe-0"},class:{type:"input",input:"text",label:"Class",class:"col-12 ma-0 ps-0 pe-0"}},a={color:{type:"input",input:"color",label:"Color",class:"col-6 ma-0 ps-0 pe-0"},"background-color":{type:"input",input:"color",label:"Background Color",class:"col-6 ma-0 ps-0 pe-0"},hint:{type:"input",input:"text",label:"Hint",class:"col-12 ma-0 ps-0 pe-0"},placeholder:{type:"input",input:"text",label:"Placeholder",class:"col-12 ma-0 ps-0 pe-0"},height:{type:"input",input:"text",label:"Placeholder",class:"col-12 ma-0 ps-0 pe-0"}},r={prefix:{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Prefix"},suffix:{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Suffix"},"append-icon":{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Append icon"},"append-outer-icon":{type:"input",input:"text",label:"Append outer icon"},"prepend-icon":{type:"input",input:"text",label:"Prepend icon"},"prepend-inner-icon":{type:"input",input:"text",label:"Prepend inner icon"},"clear-icon":{type:"input",input:"text",label:"Clear icon"}},d={"full-width":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Full width"},rounded:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Rounded"},filled:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Filled"},outlined:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Outlined"},shaped:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Shaped"},solo:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Solo"},"solo-inverted":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Solo inverted"},reverse:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Reverse"}},c={type:"group",group:"tabs",groups:{messages:{label:"Messages",fields:{messages:{type:"input",input:"datatable",class:"col-12 ma-0",props:{"disable-pagination":!0,dense:!0},columns:[{column:"message",title:"Message"}],create:{title:"Add new message to messages list",fields:{message:{type:"input",input:"text",class:"col-12 ma-0",label:"Message"}}},edit:{},remove:{}}}},"error-messages":{label:"Errors",fields:{messages:{type:"input",input:"datatable",class:"col-12 ma-0",props:{"disable-pagination":!0,dense:!0},columns:[{column:"message",title:"Message"}],create:{title:"Add new message to error messages list",fields:{message:{type:"input",input:"text",class:"col-12 ma-0",label:"Message"}}},edit:{},remove:{}}}},"success-messages":{label:"Success",fields:{messages:{type:"input",input:"datatable",class:"col-12 ma-0",props:{"disable-pagination":!0,dense:!0},columns:[{column:"message",title:"Message"}],create:{title:"Add new message to success messages list",fields:{message:{type:"input",input:"text",class:"col-12 ma-0",label:"Message"}}},edit:{},remove:{}}}}}},p={"loader-height":{type:"input",input:"text",class:"col-6 ps-0 pe-0",label:"Loader indicator height"},"hide-details":{type:"input",input:"select",class:"col-6 ps-0 pe-0",objects:[{id:"auto",title:"Auto"},{id:!0,title:"True"},{id:!1,title:"False"}],decorator:{label:":title"},label:"Hide details"},loading:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Loading"},readonly:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Readonly"},light:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Light"},dark:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Dark"},clearable:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Clearable"},disabled:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Disabled"},"persistent-hint":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Persistent hint"},error:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Error"},success:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Success"}};var u={...o,props:{type:"row",fields:{type:{type:"input",input:"text",label:"Input type"},value:{type:"input",input:"text",label:"Input Value"},...a,...r,...d,...p,messages:c}}},v={...o,props:{type:"row",fields:{...a,...p,inset:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Inset"},multiple:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Multiple"},messages:c}}},f={id:{type:"input",input:"text",label:"ID",class:"col-12 ma-0 ps-0 pe-0",updateKeyCodes:[13]},class:{type:"input",input:"text",label:"Class",class:"col-12 ma-0 ps-0 pe-0"},options:{type:"row",fields:{props:{type:"row",fields:{color:{type:"input",input:"color",label:"Color",class:"col-6 ma-0 ps-0 pe-0"},"background-color":{type:"input",input:"color",label:"Background Color",class:"col-6 ma-0 ps-0 pe-0"},prefix:{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Prefix"},suffix:{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Suffix"},"append-icon":{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Append icon"},"append-outer-icon":{type:"input",input:"text",label:"Append outer icon"},"prepend-icon":{type:"input",input:"text",label:"Prepend icon"},"prepend-inner-icon":{type:"input",input:"text",label:"Prepend inner icon"},"clear-icon":{type:"input",input:"text",label:"Clear icon"},"loader-height":{type:"input",input:"text",label:"Loader indicator height"},"hide-details":{type:"input",input:"select",objects:[{id:"auto",title:"Auto"},{id:!0,title:"True"},{id:!1,title:"False"}],decorator:{label:":title"},class:"col-12 ma-0 pe-0 ps-0",label:"Hide details"},loading:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Loading"},readonly:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Readonly"},reverse:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Reverse"},"full-width":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Full width"},light:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Light"},dark:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Dark"},rounded:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Rounded"},filled:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Filled"},outlined:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Outlined"},shaped:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Shaped"},solo:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Solo"},"solo-inverted":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Solo inverted"},clearable:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Clearable"},disabled:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Disabled"},"persistent-hint":{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Persistent hint"},error:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Error"},success:{type:"input",input:"switch",class:"col-4 ma-0 pe-0 ps-0",label:"Success"}}}}}},h={...o,objects:{type:"input",input:"datatable",label:"Available Items",class:"col-12 ma-0 pa-0",props:{"disable-pagination":!0,dense:!0},columns:[{column:"id",title:"ID"},{column:"title",title:"Title"}],create:{title:"Add new message to messages list",fields:{id:{type:"input",input:"text",class:"col-6 pe-0 ps-0",label:"ID"},title:{type:"input",input:"text",class:"col-6 pe-0 ps-0",label:"Title"}}},edit:{},remove:{}},props:{type:"row",fields:{...a,...r,...d,...p,messages:c}}},m={...o,props:{type:"row",fields:{max:{type:"input",input:"text",class:"col-4 ps-0 pe-0",label:"Max"},min:{type:"input",input:"text",class:"col-4 ps-0 pe-0",label:"Min"},step:{type:"input",input:"text",class:"col-4 ps-0 pe-0",label:"Step"},"thumb-size":{type:"input",input:"text",class:"col-4 ps-0 pe-0",label:"Thumb size"},"tick-size":{type:"input",input:"text",class:"col-4 ps-0 pe-0",label:"Thick size"},ticks:{type:"input",input:"select",objects:[{id:"auto",title:"Auto"},{id:!0,title:"True"},{id:!1,title:"False"}],decorator:{label:":title"},class:"col-12 ma-0 pe-0 ps-0",label:"Hide details"},...a,"loader-height":{type:"input",input:"text",label:"Loader indicator height"},"inverse-label":{type:"input",input:"switch",class:"col-4",label:"Inverse label"},"thumb-label":{type:"input",input:"text",class:"col-12",label:"Thumb label"},"thumb-color":{type:"input",input:"color",class:"col-4",label:"Thumb color"},"track-color":{type:"input",input:"color",class:"col-4",label:"Track color"},"track-fill-color":{type:"input",input:"color",class:"col-4",label:"Track fill color"},"append-icon":{type:"input",input:"text",class:"col-4 ma-0 pa-0",label:"Append icon"},"prepend-icon":{type:"input",input:"text",label:"Prepend icon"},...p,messages:c}}},b={},g={},y={},x={},_={},w={},k={},C={},S={},j={},A={},P={},O={},F={},$={},I={},E={label:{type:"input",input:"text",label:"Label"}},R={props:{inputs:Array,settings:Object},computed:{inputTypeSettings:function(){return{"vf-text-input":u,"vf-fields-renderer":f,"vf-switch-input":v,"vf-select-input":h,"vf-range-input":m,"vf-radio-group-input":b,"vf-color-input":g,"vf-button-group-input":y,"vf-autocomplete-input":x,"vf-multi-text-input":_,"vf-json-input":w,"vf-checkbox-input":k,"vf-bitwise-flags-input":S,"vf-objects-list-input":C,"vf-datatable-input":A,"vf-group-single-exp":O,"vf-group-expansion":F,"vf-group-tabs":$,"vf-group-treeview":I,"vf-button-input":P,"vf-image-upload-input":j,group:E}}},methods:{getRemoveAction:function(e,t){return{type:"confirm",iconProps:{small:!0,color:"red"},icon:"mdi-minus-box",props:{small:!0,icon:!0},confirm:"Delete",message:"Are you sure you want to remove item "+t.model.id+"?",callback:e=>{e&&t.drop()}}},getSettingsAction:function(e,t,i){return{type:"formjson",onUpdated:i,iconProps:{color:"primary",small:!0},icon:"mdi-settings",props:{icon:!0,small:!0},fields:this.inputTypeSettings[t.model.type]?this.inputTypeSettings[t.model.type]:{}}},getDuplicateAction:function(e,t){return{type:"button",icon:"mdi-content-duplicate",iconProps:{small:!0},props:{icon:!0,small:!0,click:()=>{const e=JSON.parse(JSON.stringify({...t.model}));e.id="rnd"+Math.random()*Number.MAX_SAFE_INTEGER;const i=this.treeModel.parse(e);i.value=JSON.parse(JSON.stringify({...t.value})),i.value.settings&&i.value.settings.id?i.value.settings.id=e.id:i.value={settings:{id:e.id}},t.parent.addChild(i)}}}},getAddAction:function(e,t,i){return i||(i=this.inputs),{type:"menu",icon:"add_box",iconProps:{color:"success",small:!0},props:{icon:!0,small:!0},fields:{id:{type:"input",input:"text",label:"Field ID"},type:{type:"input",input:"select",label:"Field type",objects:i},add:{type:"input",input:"button",label:"Add",class:"mt-4 col-12",props:{small:!0,color:"success",outlined:!0,click:()=>{if(t.value&&t.value.add){const e={id:t.value.add.id,title:t.value.add.title,type:t.value.add.type},i=this.treeModel.parse(e);i.value={settings:{id:t.value.add.id}},t.addChild(i)}}}}}}}}};const M={methods:{setNestedPathValue:function(e,t,i){const l=t.split(".");l.forEach((t,s)=>{s===l.length-1?e[t]=i:(e[t]||(e[t]={}),e=e[t])})},getNestedPathValue:function(e,t){const i=t.split(".");let l=e;return i.forEach(e=>{l&&(l=l[e])}),l},flattenObject:function(e,t=-1){const i={},l=(e,s,n)=>{for(const o in e)e[o]instanceof Object&&(n<=0||n<t)?l(e[o],s+"."+o,n+1):i[s+"."+o]=e[o]};return l(e,"",0),i}}},V={methods:{startJSONDownload:function(e){return()=>{console.log("download",e);const t="data:text/json;charset=utf-8,"+encodeURIComponent(e),i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download","schema.json"),document.body.appendChild(i),i.click(),i.remove()}},startJSONUpload:function(e){return()=>{const t=document.createElement("input");t.setAttribute("type","file"),document.body.appendChild(t),t.click(),t.addEventListener("change",(function(t){const i=t.target.files;if(i.length){const t=i[0],l=new FileReader;l.onload=t=>{try{const i=JSON.parse(t.target.result);e(i)}catch(t){console.error(t)}},l.readAsText(t)}}),!1),t.remove()}}}};const T=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[i("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.title))])],1),i("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4"},[e._v(e._s(e.message))]),i("v-card-actions",{staticClass:"pt-0"},[i("v-spacer"),i("v-btn",{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("Yes")]),i("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Cancel")])],1)],1)],1)},staticRenderFns:[]},void 0,{data:()=>({dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}),methods:{open(e,t,i){return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,i),new Promise((e,t)=>{this.resolve=e,this.reject=t})},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const N=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fill-height"},[i("confirm",{ref:"confirm"}),i("v-row",{staticClass:"ms-2 me-2 mb-0 mt-0"},[i("label",[e._v(e._s(e.label))]),i("v-spacer"),i("v-btn",{attrs:{small:"",icon:""},on:{click:e.onReset}},[i("v-icon",{attrs:{small:""}},[e._v("mdi-refresh")])],1),i("v-btn",{attrs:{small:"",icon:""},on:{click:e.onDownload}},[i("v-icon",{attrs:{small:""}},[e._v("mdi-download")])],1),i("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){e.startJSONUpload(e.onUploaded)()}}},[i("v-icon",{attrs:{small:""}},[e._v("mdi-upload")])],1)],1),i("vf-fields-renderer",{attrs:{options:{class:"fill-height ma-0 pa-0"},fields:e.formBuilderTreeview},model:{value:e.schema,callback:function(t){e.schema=t},expression:"schema"}})],1)},staticRenderFns:[]},void 0,{components:{confirm:T},mixins:[R,V],name:"vuetify-formjson-builder",props:{label:{type:String,default:"Create form schema with a treeview"},labelDownload:{type:String,default:"Download builder data as a json file"},labelUpload:{type:String,default:"Upload builder data with json file"},tree:{type:Object,default:()=>({id:"formjson",type:"vf-fields-renderer",children:[]})},value:{type:Object,default:()=>({})}},data(){const t=new e({}),i=[t.parse(JSON.parse(JSON.stringify(this.tree)))];return{formjson:{},treeModel:t,devalue:this.value,schema:{builder:i},formBuilderTreeview:{builder:{type:"group",group:"treeview",iconProps:{small:!0},btnProps:{small:!0},drawerProps:{width:400,right:!0},formProps:{class:"pa-4",options:{type:"col",dense:!0,small:!0}},class:"fill-height ma-2",decorator:{id:"model.id",title:"model.title",type:"model.type",label:"[:type] #:id"},actions:{hasAction:(e,t)=>"prepend"===e||!t.isRoot(),getActions:(e,t)=>{const i={};switch(e){case"append":t.isRoot()||(i.duplicate=this.getDuplicateAction(this.schema.builder,t));break;case"prepend":"vf-fields-renderer"===t.model.type?i.add=this.getAddAction(this.schema.builder,t):i.remove=this.getRemoveAction(this.schema.builder,t),t.model.type.startsWith("group")&&(i.add=this.getAddAction(this.schema.builder,t)),t.model.type.startsWith("vf-group-")&&(i.add=this.getAddAction(this.schema.builder,t,[this.inputs[this.inputs.length-1]])),i.settings=this.getSettingsAction(this.schema.builder,t,e=>{t.model.id!==e.id&&e.id&&(t.model.id=e.id)})}return i}},props:{dense:!0,"item-key":"id","item-text":"title",shaped:!0,hoverable:!0,"return-object":!0}}}}},computed:{},methods:{updateFormJSONInput(){const e={},t=(e,i)=>{e.forEach(e=>{let l="";if(e.model.type)if(e.model.type.endsWith("input")){const t=e.model.type.split("-");i[e.model.id]={type:"input",input:t.slice(1,t.length-1).join("-"),...e.value&&e.value.settings?e.value.settings:{}}}else if(e.model.type.startsWith("vf-group-")){l="groups";const t=e.model.type.split("-");i[e.model.id]={type:"group",group:t.slice(2).join("-"),...e.value&&e.value.settings?e.value.settings:{},[l]:{}}}else"group"===e.model.type&&(l="fields",i[e.model.id]={...e.value&&e.value.settings?e.value.settings:{},[l]:{}});i[e.model.id]||(l="fields",i[e.model.id]={...e.value&&e.value.settings?e.value.settings:{},[l]:{}}),e.children&&t(e.children,i[e.model.id][l])})};this.schema.builder&&t(this.schema.builder,e),this.formjson=e,this.$emit("input",e)},onUploaded(e){const t=this,i=function e(i,l=null){const s=[];for(const n in i){let o="vf-fields-renderer";if(i[n].type)switch(i[n].type){case"input":o="vf-"+i[n].input+"-input";break;case"group":o="vf-group-"+i[n].group;break;case"component":o=i[n].component}else l&&(o=l);const a={id:n,type:o},r=t.treeModel.parse(a);let d=[];i[n].fields?d=e(i[n].fields):i[n].groups&&(d=e(i[n].groups,"group")),d.forEach(e=>{r.addChild(e)});const c={},p=["fields","groups","group","type","input","component"];for(const e in i[n])p.indexOf(e)<0&&(c[e]=i[n][e]);r.value={settings:c},s.push(r)}return s}(e);this.schema={builder:i}},onDownload(){this.startJSONDownload(JSON.stringify(this.formjson,null,2))()},onReset(){this.$refs.confirm.open("Reset","Are you sure you want to reset the schema?",{color:"red"}).then(e=>{e&&(this.schema={builder:[this.treeModel.parse(this.tree)]})})}},watch:{schema:{deep:!0,handler(){this.updateFormJSONInput(),this.$emit("update:schema",this.schema)}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const D=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"hide-details":"auto"},nativeOn:{keyup:function(t){return e.updateInput(t)}},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-text-field",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-text-input",props:{id:String,field:Object,value:[Object,String]},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},methods:{updateInput:function(e){this.field.updateKeyCodes&&0!==this.field.updateKeyCodes.length&&!this.field.updateKeyCodes.includes(e.keyCode)||this.$emit("input",this.devalue)}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const B=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-text-field",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"hide-details":"auto",mask:"####"},nativeOn:{keyup:function(t){return e.colorTextChanged(t)}},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[i("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[i("div",e._g({style:{border:"1px solid black",backgroundColor:e.value,cursor:"pointer",height:"16px",width:"16px",marginTop:"2px",borderRadius:"5px",transition:"border-radius 200ms ease-in-out"}},l))]}}]),model:{value:e.colorsMenu,callback:function(t){e.colorsMenu=t},expression:"colorsMenu"}},[i("v-card",[i("v-card-text",{staticClass:"pa-0"},[i("v-color-picker",e._b({attrs:{value:e.getColorValue},on:{"update:color":e.colorSelected}},"v-color-picker",e.pickerProps,!1))],1)],1)],1)]},proxy:!0}]),model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-text-field",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-color-input",props:{id:String,field:Object,value:String},data(){return{colorsMenu:!1,devalue:this.value}},computed:{getColorValue:function(){return this.devalue},fieldProps:function(){return{...this.field.props}},pickerProps:function(){return{...this.field.picker}}},methods:{colorTextChanged:function(e){this.$emit("input",this.devalue)},colorSelected:function(e){this.colorsMenu&&(this.devalue=e.hexa,this.$emit("input",this.devalue))}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const U=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-grow-1 flex-row flex-wrap align-center justify-space-between "+(e.field.class?e.field.class:"")},[i("label",{staticClass:"flex-grow-0"},[e._v(e._s(e.field.label))]),i("v-btn-toggle",e._b({staticClass:"d-flex flex-grow-1 flex-row justify-end",model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-btn-toggle",e.fieldProps,!1),e._l(e.field.objects,(function(t,l){return i("div",{key:e.id+"-btn-grp-"+l},[t.title?i("v-tooltip",{scopedSlots:e._u([{key:"activator",fn:function(l){var s=l.on;return[i("v-btn",e._g(e._b({},"v-btn",e.getBtnFieldProps(t),!1),s),[t.label?i("span",{staticClass:"text-sm"},[e._v(e._s(t.label))]):e._e(),t.icon?i("v-icon",e._b({},"v-icon",t.iconProps,!1),[e._v(e._s(t.icon))]):e._e()],1)]}}],null,!0)},[e._v("\n        "+e._s(t.title)+"\n      ")]):i("v-btn",e._b({},"v-btn",e.getBtnFieldProps(t),!1),[t.label?i("span",{staticClass:"text-sm"},[e._v(e._s(t.label))]):e._e(),t.icon?i("v-icon",e._b({},"v-icon",t.iconProps,!1),[e._v(e._s(t.icon))]):e._e()],1)],1)})),0)],1)},staticRenderFns:[]},void 0,{name:"vf-select-button-input",props:{field:Object,id:String,value:[Array,Number]},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},methods:{getBtnFieldProps:function(e){return{...this.field.props,...e.props}}},watch:{devalue:function(){this.$emit("input",this.devalue)},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const L=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-select",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{items:e.field.objects,label:e.field.label,multiple:e.field.multiple,"menu-props":{maxHeight:"400"},"hide-details":"auto","item-text":"title","item-value":"id"},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-select",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-select-input",props:{field:Object,id:String,value:[Array,String]},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:function(){this.$emit("input",this.devalue)},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const J=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-slider",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"thumb-label":"","hide-details":"auto"},on:{change:e.updateInput},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-slider",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-range-input",props:{id:String,field:Object,value:Number},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},methods:{updateInput:function(){this.$emit("input",this.devalue)}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const G=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-switch",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"hide-details":"auto"},on:{change:e.updateInput},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-switch",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-switch-input",props:{id:String,field:Object,value:Object},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},methods:{updateInput:function(){this.$emit("input",this.devalue)}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const Y=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-autocomplete",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,items:e.field.objects,"item-text":"title","item-value":"id","hide-details":"auto"},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-autocomplete",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-autocomplete-input",props:{id:String,field:Object,value:[Array,String]},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:{deep:!0,handler(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const H=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-text-field",e._b({ref:"inputValue",class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"hide-details":"auto"},on:{input:function(t){return e.updateInput()}},scopedSlots:e._u([{key:e.appendMode,fn:function(){return[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[i("v-btn",e._g({staticClass:"w70 flex-row",attrs:{small:"",dense:"",rounded:"",outlined:"",color:"secondary"},on:{click:function(t){return e.nextMode()}}},l),[e._v("\n          "+e._s(e.current.abbr?e.current.abbr:e.current.title)+"\n          "),i("v-icon",{attrs:{small:""}},[e._v(e._s(e.field.icon?e.field.icon:"chevron_right"))])],1)]}}])},[i("span",[e._v(e._s(e.current.title))])])]},proxy:!0}],null,!0),model:{value:e.devalue[e.current?e.current.id:""],callback:function(t){e.$set(e.devalue,e.current?e.current.id:"",t)},expression:"devalue[current ? current.id: '']"}},"v-text-field",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-multitext-input",props:{id:String,field:Object,value:{type:Object,default:()=>({})}},data(){return{currIndex:0,devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props,...this.current&&this.current.props?this.current.props:{}}},modes:function(){return this.field.modes?this.field.modes:[]},current:function(){return this.modes.length>0&&this.currIndex>=0?this.modes[this.currIndex]:null},appendMode:function(){return this.field.slot?this.field.slot:"prepend"}},methods:{updateInput:function(){this.$emit("input",this.devalue)},nextMode(){this.currIndex=this.currIndex===this.modes.length-1?0:this.currIndex+1}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}},created(){if("object"==typeof this.devalue&&this.devalue.id){let e=0;const t=this;this.modes.forEach(i=>{i.id===t.devalue.id&&(t.currIndex=e),e++})}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const X=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.getRootComponent(),e._b({tag:"component",class:""+(e.options.formClass?e.options.formClass:"")},"component",e.getRootComponentProps(),!1),e._l(e.fields,(function(t,l){return i(e.getComponentForField(t),e._b({key:e.id+"-properties-"+l,ref:l,refInFor:!0,tag:"component",model:{value:e.devalue[l],callback:function(t){e.$set(e.devalue,l,t)},expression:"devalue[key]"}},"component",e.getComponentPropsForField(t),!1))})),1)},staticRenderFns:[]},void 0,{name:"vf-fields-renderer",props:{id:String,fields:Object,formClass:String,value:{type:Object,default:()=>({})},options:Object,onUpdated:Function},data(){return{devalue:this.value}},watch:{devalue:{deep:!0,handler:function(){this.onUpdated&&this.onUpdated(this.devalue),this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}},methods:{getRootComponent(){if(this.options)switch(this.options.type){case"col":return"v-col";case"component":return this.options.component}return"v-row"},getRootComponentProps(){return this.options&&this.options.props?this.options.props:{}},getComponentPropsForField(e,t){if(!e.type||"row"===e.type||"col"===e.type)return{fields:e.fields,options:{type:e.type?e.type:"row",props:e.props,...e.options}};const i={field:{...e},id:`${this.id}-field-${t}`};return this.options&&(this.options.class&&(i.field.class=this.options.class+(i.field.class?" "+i.field.class:"")),this.options.props&&(i.field.props={...this.options.props,...i.field.props?i.field.props:{}})),i},getComponentForField:e=>"input"===e.type&&e.input?`vf-${e.input}-input`:"group"===e.type&&e.group?"vf-group-"+e.group:e.fields?"vf-fields-renderer":void 0}},void 0,!1,void 0,!1,void 0,void 0,void 0);const z=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-grow-1 flex-column "+(e.field.class?e.field.class:"")},[i("div",{staticClass:"d-flex flex-row align-center mb-1"},[i("label",{class:e.field.props&&e.field.props.error?"red--text me-1":"me-1"},[e._v(e._s(e.field.label))]),i("v-btn",{attrs:{text:"",icon:"",color:"code"===e.options.mode?"primary":"secondary"},on:{click:function(t){return e.setMode("code")}}},[i("v-icon",[e._v(e._s(e.field.icons&&e.field.icons.code?e.field.icons.code:"code"))])],1),i("v-btn",{attrs:{text:"",icon:"",color:"tree"===e.options.mode?"primary":"secondary"},on:{click:function(t){return e.setMode("tree")}}},[i("v-icon",[e._v(e._s(e.field.icons&&e.field.icons.edit?e.field.icons.edit:"edit"))])],1),i("v-btn",{attrs:{text:"",icon:"",color:"form"===e.options.mode?"primary":"secondary"},on:{click:function(t){return e.setMode("form")}}},[i("v-icon",[e._v(e._s(e.field.icons&&e.field.icons.view?e.field.icons.view:"remove_red_eye"))])],1)],1),i("div",{ref:"editor",style:"width: 100%; height: "+(e.field.height?e.field.height:"400px")+";"}),i("v-divider"),e.field.props&&e.field.props.error?i("div",{staticClass:"d-flex flex-column"},e._l(e.field.props["error-messages"],(function(t,l){return i("div",{key:"error-message-"+l,staticClass:"red--text"},[e._v(e._s(t))])})),0):e._e()],1)},staticRenderFns:[]},void 0,{name:"vf-json-input",props:{id:String,field:Object,value:[Object,String]},data(){return{options:{mode:"code"},editor:null,ignoreUpdate:!1,devalue:this.value}},mounted:function(){const e=this,i=this.$refs.editor,l={...this.options,onChange:function(){try{this.devalue=e.editor.get(),this.ignoreUpdate=!0,e.$emit("input",this.devalue)}catch(e){}}};i&&(this.editor=new t(i,l),this.devalue?"string"==typeof this.devalue?this.editor.set(JSON.parse(this.devalue)):this.editor.set(this.devalue):this.editor.set({}))},watch:{devalue:{deep:!0,handler(){const e=this.editor.getTextSelection();this.editor.set(this.devalue),this.editor.setTextSelection(e.start,e.end)}},value:{deep:!0,handler(){this.devalue=this.value}}},methods:{setMode:function(e){this.options.mode=e,this.editor.setMode(e)}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const K=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-checkbox",e._b({class:"vf-input "+(e.field.class?e.field.class:""),attrs:{label:e.field.label,"hide-details":"auto"},on:{change:e.updateInput},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-checkbox",e.fieldProps,!1))},staticRenderFns:[]},void 0,{name:"vf-checkbox-input",props:{id:String,field:Object,value:[Boolean,String,Number]},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},methods:{updateInput:function(e){this.$emit("input",this.devalue)}},watch:{value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const W=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-column "+(e.field.class?e.field.class:"")},[i("label",{class:e.field.props&&e.field.props.error?"red--text":""},[e._v(e._s(e.field.label))]),i("div",{staticClass:"row ma-0"},e._l(e.field.objects,(function(t){return i("v-checkbox",e._b({key:e.id+"-checkbox-"+t[e.decorator.id],class:"ma-0 pa-0 me-4 "+(t.props?t.props.class:null),attrs:{label:e.getLabel(t)},model:{value:e.devalue[t[e.decorator.id]],callback:function(i){e.$set(e.devalue,t[e.decorator.id],i)},expression:"devalue[item[decorator.id]]"}},"v-checkbox",e.getProps(t),!1))})),1),e.field.props&&e.field.props.error?i("div",{staticClass:"d-flex flex-column"},e._l(e.field.props["error-messages"],(function(t,l){return i("div",{key:e.id+"-error-"+l,staticClass:"red--text"},[e._v(e._s(t))])})),0):e._e()])},staticRenderFns:[]},void 0,{name:"vf-objects-list-input",props:{id:String,field:Object,value:{type:Object,default:()=>({})}},data(){return{devalue:this.value}},computed:{decorator:function(){return{id:this.field.decorator?this.field.decorator.id:"id",title:this.field.decorator?this.field.decorator.title:"title",label:this.field.decorator?this.field.decorator.label:":id#:title"}}},methods:{getProps:function(e){return{...this.field.props,...e.props?e.props:{}}},getLabel:function(e){const t=this.decorator;return t.label.replace(":id",e[t.id]).replace(":title",e[t.title])}},watch:{devalue:function(){this.$emit("input",this.devalue)},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const q=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-column "+(e.field.class?e.field.class:"")},[i("label",{class:e.field.props&&e.field.props.error?"red--text":""},[e._v(e._s(e.field.label))]),i("div",{staticClass:"row ma-0"},[i("v-radio-group",{attrs:{mandatory:!1},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},e._l(e.field.objects,(function(t){return i("v-radio",e._b({key:e.id+"-checkbox-"+t[e.decorator.id],class:""+(t.class?t.class:null),attrs:{value:t[e.decorator.id],label:e.getLabel(t)}},"v-radio",e.getProps(t),!1))})),1)],1),e.field.props&&e.field.props.error?i("div",{staticClass:"d-flex flex-column"},e._l(e.field.props["error-messages"],(function(t,l){return i("div",{key:e.id+"-error-"+l,staticClass:"red--text"},[e._v(e._s(t))])})),0):e._e()])},staticRenderFns:[]},void 0,{name:"vf-radio-group-input",props:{id:String,field:Object,value:String},data(){return{devalue:this.value}},computed:{decorator:function(){return{id:this.field.decorator?this.field.decorator.id:"id",title:this.field.decorator?this.field.decorator.title:"title",label:this.field.decorator?this.field.decorator.label:":id#:title"}}},methods:{getProps:function(e){return{...this.field.props,...e.props?e.props:{}}},getLabel:function(e){const t=this.decorator;return t.label.replace(":id",e[t.id]).replace(":title",e[t.title])}},watch:{devalue:function(){this.$emit("input",this.devalue)},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const Q=s({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("vf-objects-list-input",{attrs:{field:e.field,id:e.id+"-bitwise"},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}})},staticRenderFns:[]},void 0,{name:"vf-bitwise-flags-input",props:{id:String,field:Object,value:Number},data(){return{innerValue:{},devalue:this.value}},watch:{devalue:function(){const e={};this.field.objects.forEach(t=>{0!=(this.value&t.id)&&(e[t.id]=!0)}),this.innerValue=e},value:{deep:!0,handler(){this.devalue=this.value}},innerValue:{deep:!0,handler(){let e=0;for(const t in this.innerValue)Object.prototype.hasOwnProperty.call(this.innerValue,t)&&this.innerValue[t]&&(e+=parseInt(t));this.devalue=e,this.$emit("input",this.devalue)}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const Z=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-column "+(e.field.class?e.field.class:"")},[i("label",{staticClass:"ma-1"},[e._v(e._s(e.field.label))]),i("v-image-input",e._b({attrs:{"image-quality":.85},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}},"v-image-input",e.fieldProps,!1))],1)},staticRenderFns:[]},void 0,{components:{[i.name]:i},name:"vf-image-upload-input",props:{id:String,field:Object,value:String},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:{deep:!0,handler(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const ee=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[i("v-btn",e._g({attrs:{color:e.showSettings?"warning":"secondary",icon:"","x-small":"",text:""}},l),[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.showSettings?"close":e.field.settings.icon?e.field.settings.icon:"settings_applications"))])],1)]}}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v(e._s(e.field.settings.title))]),e.showSettings?i("vf-fields-renderer",{staticClass:"pa-2",attrs:{fields:e.settingsFields,options:e.field.settings.options},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}}):e._e()],1)],1)},staticRenderFns:[]},void 0,{name:"vf-datatable-dialog-settings",props:{value:{type:Object,default:()=>({})},showSettings:Boolean,field:Object},data(){return{devalue:this.value}},computed:{settingsFields:function(){return{"hide-columns":{type:"input",input:"objects-list",label:"Hide columns",objects:this.field.columns,decorator:{id:"column",title:"title",label:":title"}}}}},watch:{devalue:{deep:!0,handler(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const te=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{"max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[i("v-btn",e._g({attrs:{color:e.showDelete?"warning":"red",icon:"","x-small":"",text:""}},l),[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.showDelete?"close":e.field.remove.icon?e.field.remove.icon:"indeterminate_check_box"))])],1)]}}]),model:{value:e.showDelete,callback:function(t){e.showDelete=t},expression:"showDelete"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v(e._s(e.field.remove.title?e.field.remove.title:"You sure"))]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.$emit("cancel",t),e.showDelete=!1}}},[e._v(e._s(e.field.remove.cancel?e.field.remove.cancel:"Cancel"))]),i("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.$emit("accept",t),e.showDelete=!1}}},[e._v(e._s(e.field.remove.cancel?e.field.remove.accept:"Yes"))])],1)],1)],1)},staticRenderFns:[]},void 0,{name:"vf-datatable-dialog-delete",props:{showDelete:Boolean,field:Object,selected:Array}},void 0,!1,void 0,!1,void 0,void 0,void 0);const ie=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{persisted:"","max-width":"800px"},on:{"click:outside":function(t){return e.$emit("on-cancel")}},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on;return[i("v-btn",e._g({attrs:{color:e.showCreate?"warning":"success",icon:"","x-small":"",text:""}},l),[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.showCreate?"close":"add_box"))])],1)]}}]),model:{value:e.showCreate,callback:function(t){e.showCreate=t},expression:"showCreate"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v(e._s(e.field.create.title))]),i("v-card-text",[i("v-container",[i("vf-fields-renderer",{ref:"renderer",staticClass:"pa-2",attrs:{fields:e.fieldCreateFields,options:e.field.create.options},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}})],1)],1)],1)],1)},staticRenderFns:[]},void 0,{name:"vf-datatable-dialog-create",props:{value:{type:Object,default:()=>({})},field:Object,forceShow:Boolean,editMode:Boolean},data(){return{showCreate:!1,devalue:this.value}},computed:{fieldCreateFields:function(){const e=this,t=this.editMode?{options:{props:{class:"d-flex flex-row-reverse mt-3"}},fields:{update:{type:"input",input:"button",label:this.field.edit.label?this.field.edit.label:"Update",class:"col-3 me-1",action:"update",props:{outlined:!0,color:"primary",small:!0,click:()=>{e.$emit("on-update",e.devalue),e.devalue=Object.assign({})}}},cancel:{type:"input",input:"button",label:this.field.cancel?this.field.cancel:"Cancel",class:"col-3 me-1",action:"close",props:{outlined:!0,color:"warning",small:!0,click:()=>{e.$emit("on-cancel"),e.showCreate=!1}}}}}:{options:{props:{class:"d-flex flex-row-reverse mt-3"}},fields:{addnclose:{type:"input",input:"button",label:this.field.create.labels&&this.field.create.label.add_n_close?this.field.create.label.add_n_close:"Add and Close",class:"col-3 me-1",action:"add_n_close",props:{outlined:!0,color:"primary",small:!0,click:()=>{e.$emit("on-create",e.devalue),e.showCreate=!1}}},addnnew:{type:"input",input:"button",label:this.field.create.labels&&this.field.create.labels.add_n_new?this.field.create.label.add_n_new:"Add and New",class:"col-3 me-1",action:"add_n_new",props:{outlined:!0,color:"primary",small:!0,click:()=>{e.$emit("on-create",e.devalue),e.devalue=Object.assign({})}}},cancel:{type:"input",input:"button",label:this.field.create.labels&&this.field.create.labels.add_n_new?this.field.create.label.add_n_new:"Cancel",class:"col-3 me-1",action:"close",props:{outlined:!0,color:"warning",small:!0,click:()=>{e.$emit("on-cancel"),e.showCreate=!1}}}}};return{...this.field.create.fields,actions_row:t}}},watch:{devalue:{deep:!0,handler(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}},forceShow:function(){this.showCreate=this.forceShow}},mounted(){this.showCreate=this.forceShow}},void 0,!1,void 0,!1,void 0,void 0,void 0);const le=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"vf-input d-flex flex-column flex-grow-1 "+(e.field.class?e.field.class:"")},[i("v-alert",{attrs:{type:e.alert.type,color:e.alert.color,dense:"",transition:"slide-y-transition",dismissible:""},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(e._s(e.alert.message))]),i("v-toolbar",{staticClass:"ma-0 pa-0",attrs:{dense:"",flat:""}},[i("label",[e._v(e._s(e.field.label))]),i("v-spacer"),e.field.remove&&e.selected.length>0?i("vf-datatable-dialog-delete",{attrs:{showDelete:e.showDelete,field:e.field,selected:e.selected},on:{accept:function(t){return e.onRemoveSelected()}}}):e._e(),e.field.settings?i("vf-datatable-dialog-settings",{attrs:{showSettings:e.showSettings,field:e.field},model:{value:e.settingsModel,callback:function(t){e.settingsModel=t},expression:"settingsModel"}}):e._e(),e.field.create?i("vf-datatable-dialog-create",{attrs:{field:e.field,forceShow:e.showCreate,"edit-mode":e.editMode},on:{"on-create":e.onCreateNew,"on-cancel":e.onCancelNew,"on-update":e.onUpdateNew},model:{value:e.createModel,callback:function(t){e.createModel=t},expression:"createModel"}}):e._e()],1),i("v-data-table",e._b({attrs:{headers:e.headers,items:e.items,search:e.search,expanded:e.expanded,"server-items-length":e.total,options:e.options,"sort-by":e.sortBy,"sort-desc":e.sortDesc,loading:e.loading,"calculate-widths":!0,"selectable-key":""},on:{"update:expanded":function(t){e.expanded=t},"update:options":function(t){e.options=t},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"click:row":e.onToggleItem},scopedSlots:e._u([{key:"item.data-table-select",fn:function(t){var l=t.item,s=t.isSelected,n=t.select;return[i("v-simple-checkbox",{staticClass:"d-inline",attrs:{value:s},on:{input:function(e){return n(e)}}}),e.field.remove?i("v-btn",{attrs:{icon:"","x-small":"",color:"red"},on:{click:function(t){return e.onRemoveSelected(l)}}},[i("v-icon",{attrs:{"x-small":""}},[e._v(e._s(e.field.remove.icon?e.field.remove.icon:"indeterminate_check_box"))])],1):e._e(),e.field.edit?i("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(t){return e.onOpenEditDialog(l)}}},[i("v-icon",{attrs:{"x-small":""}},[e._v(e._s(e.field.edit.icon?e.field.edit.icon:"edit"))])],1):e._e()]}},e._l(e.templates,(function(t){return{key:e.getTemplateSlot(t),fn:function(l){var s=l.item;return[i(t.component,{key:t.column,tag:"component",attrs:{item:s,params:t.params,column:t.column,extras:t.extras},on:{"open-extend":e.onExpandItem,"close-extend":e.onCloseItem}})]}}})),e._l(e.headers,(function(t){return{key:e.getHeaderSlot(t),fn:function(i){return[e._v(e._s(t.text))]}}}))],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},"v-data-table",e.fieldProps,!1))],1)},staticRenderFns:[]},void 0,{components:{[ee.name]:ee,[te.name]:te,[ie.name]:ie},name:"vf-datatable-input",props:{field:Object,id:String,value:Array},data(){return{createModel:{},showAlert:!1,showDelete:!1,showCreate:!1,loading:!1,editMode:!1,loadingId:0,search:"",items:[],selected:[],expanded:[],options:{},total:0,response:null,sortBy:null,sortDesc:null,expandTemplate:null,expandTemplateDefaultMetadata:null,devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}},headers:function(){const e=[];return this.field.columns&&this.field.columns.forEach(t=>{"template"===t.type&&t.template.params&&!1===t.template.params.header||e.push({text:t.title,value:t.column,align:"start",sortable:t.sortable,divider:!0,width:t.width})}),e},templates:function(){const e=[];return this.field.columns&&this.field.columns.forEach(t=>{if("template"===t.type){const i={},l={component:"vf-table-column-"+t.template.component,params:t.template.params,column:t.column,extras:i};e.push(l),"expanded-item"===t.template.params.slot&&(this.expandTemplate=l,this.expandTemplateDefaultMetadata={...l.params.metadata})}}),e},alert:function(){return this.response?{show:200!==this.response.status,color:200===this.response.status?"blue-grey darken-1 ":"error",type:200!==this.response.status?"error":"success",message:this.response.data.message,messages:this.response.data.errors}:{show:!1}}},methods:{updateTable(){this.loading=!0,this.loadingId+=1;const e=[];this.options.sortBy.forEach((t,i)=>{e.push({column:t,direction:this.options.sortDesc[i]?"desc":"asc"})}),this.field.table&&this.field.table.query?l.post(this.field.table.query.url,{ref_id:this.loadingId,page:this.options.page,limit:this.options.itemsPerPage,search:this.search,sort:e,with:this.field.table.query.params.with}).then(e=>{this.response=e,e.data.data&&this.loadingId<=e.data.ref_id&&this.updateTableData(e.data)}).catch(e=>{this.response=e.response}).finally(()=>{this.loading=!1}):(this.loading=!1,this.items=[])},updateTableData(e){this.items=e.data,this.total=e.total},getTemplateSlot:e=>e.params&&e.params.slot?e.params.slot:"item."+e.column,getHeaderSlot:e=>"header."+e.value,onToggleItem(e){this.toggleArray(this.expanded,e)},onCloseItem(e){this.putOffArray(this.expanded,e.item)},onExpandItem(e){this.putOnArray(this.expanded,e.item),this.expandTemplate.params.metadata=e.link.metadata},onRemoveSelected(e){if(e)this.items=this.items.filter(t=>t.id!==e.id);else{const e=this;this.items=this.items.filter(t=>0===e.selected.filter(e=>e.id===t.id).length)}this.selected=[]},onCreateNew(){this.items.unshift({id:"id#"+Math.random()*Number.MAX_SAFE_INTEGER,...this.createModel}),this.showCreate=!1},onUpdateNew(){const e=this;console.log(this.items,e.createModel),this.items.forEach(t=>{if(t.id===e.createModel.id)for(const i in e.createModel)t[i]=e.createModel[i]}),this.editMode=!1,this.showCreate=!1},onCancelNew(){this.showCreate=!1,this.editMode=!1},onOpenEditDialog(e){console.log(e),this.createModel=Object.assign({},e),this.editMode=!0,this.showCreate=!0},toggleArray(e,t){const i=e.indexOf(t);i>=0?e.splice(i,1):e.push(t)}},watch:{showCreate:function(){console.log("showcreate d",this.showCreate)},search:function(e,t){this.updateTable()},options:{deep:!0,handler(){this.updateTable()}},devalue:{deep:!0,handler(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}},items:{deep:!0,handler(){this.field.create&&(this.devalue=[].concat(this.items),this.total=this.devalue.length)}},selected:{deep:!0,handler(){}}},mounted(){this.updateTable()}},void 0,!1,void 0,!1,void 0,void 0,void 0);const se=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-btn",e._b({class:"vf-input vf-btn "+(e.field.class?e.field.class:""),on:{click:e.onButtonClick}},"v-btn",e.fieldProps,!1),[e.field.label?i("span",[e._v(e._s(e.field.label))]):e._e(),e.field.icon?i("v-icon",e._b({},"v-icon",e.fieldIconProps,!1),[e._v(e._s(e.field.icon))]):e._e()],1)},staticRenderFns:[]},void 0,{name:"vf-button-input",props:{id:String,field:Object},computed:{fieldProps:function(){return{...this.field.props}},fieldIconProps:function(){return{...this.field.props,...this.field.iconProps}}},methods:{onButtonClick:function(e){this.field.props&&this.field.props.click&&this.field.props.click(e)}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const ne=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-expansion-panels",e._b({class:"v-group "+(e.field.class?e.field.class:"")},"v-expansion-panels",e.fieldProps,!1),[i("v-expansion-panel",[i("v-expansion-panel-header",[e._v(e._s(e.field.label))]),i("v-expansion-panel-content",[i("vf-fields-renderer",{attrs:{options:e.field.options,fields:e.field.fields,id:e.id+"-fields"},model:{value:e.devalue,callback:function(t){e.devalue=t},expression:"devalue"}})],1)],1)],1)},staticRenderFns:[]},void 0,{name:"vf-group-single-exp",props:{field:Object,id:String,value:{type:Object,default:()=>({})}},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:{deep:!0,handler:function(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const oe=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-expansion-panels",e._b({class:"v-group "+(e.field.class?e.field.class:"")},"v-expansion-panels",e.fieldProps,!1),e._l(e.field.groups,(function(t,l){return i("v-expansion-panel",{key:e.id+"-group-expansion-"+l},[i("v-expansion-panel-header",[e._v(e._s(t.label))]),i("v-expansion-panel-content",[i("vf-fields-renderer",{attrs:{options:t.options,fields:t.fields,id:e.id+"-expansion-fields"},model:{value:e.devalue[l],callback:function(t){e.$set(e.devalue,l,t)},expression:"devalue[key]"}})],1)],1)})),1)},staticRenderFns:[]},void 0,{name:"vf-group-expansions",props:{field:Object,id:String,value:{type:Object,default:()=>({})}},data(){return{delue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:{deep:!0,handler:function(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const ae=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-tabs",e._b({class:"v-group "+(e.field.class?e.field.class:"")},"v-tabs",e.fieldProps,!1),[e._l(e.field.groups,(function(t,l){return i("v-tab",{key:e.id+"-tab-label-"+l,attrs:{href:"#"+e.id+"-tab-"+l}},[i("label",[e._v(e._s(t.label))])])})),e._l(e.field.groups,(function(t,l){return i("v-tab-item",{key:e.id+"-tab-item-"+l,attrs:{value:e.id+"-tab-"+l}},[i("vf-fields-renderer",{attrs:{options:t.options,fields:t.fields,id:e.id+"-tab-fields"},model:{value:e.devalue[l],callback:function(t){e.$set(e.devalue,l,t)},expression:"devalue[key]"}})],1)}))],2)},staticRenderFns:[]},void 0,{name:"vf-group-tabs",props:{field:Object,id:String,value:{type:Object,default:()=>({})}},data(){return{devalue:this.value}},computed:{fieldProps:function(){return{...this.field.props}}},watch:{devalue:{deep:!0,handler:function(){this.$emit("input",this.devalue)}},value:{deep:!0,handler(){this.devalue=this.value}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const re=s({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-sheet",{class:"vf-input overflow-hidden d-flex flex-column flex-grow-1 "+(e.field.class?e.field.class:""),staticStyle:{position:"relative"}},[i("confirm",{ref:"confirm"}),i("v-menu",{attrs:{"close-on-content-click":!1,"position-x":e.menuX,"position-y":e.menuY},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[i("v-card",[e.currentAction?i("vf-fields-renderer",e._b({attrs:{"on-updated":e.currentAction.onUpdated,fields:e.currentAction.fields},model:{value:e.currentActionValue,callback:function(t){e.currentActionValue=t},expression:"currentActionValue"}},"vf-fields-renderer",e.currentActionProps,!1)):e._e()],1)],1),e.field.label?i("label",[e._v(e._s(e.field.label))]):e._e(),i("v-container",{staticClass:"fill-height align-start ma-0 pa-0"},[i("v-treeview",e._b({attrs:{items:e.devalue},scopedSlots:e._u([e._l(e.actionSlots,(function(t){return{key:t,fn:function(l){var s=l.item;return[e.field.actions&&e.field.actions.hasAction(t,s)?i("div",{key:e.id+"-actions-"+t,staticClass:"d-flex flex-row"},e._l(e.field.actions.getActions(t,s),(function(l,n){return i("v-btn",e._b({key:e.id+"-tree-append-"+n,on:{click:function(i){return e.onActionClicked(i,t,l,n,s)}}},"v-btn",l.props,!1),[e._v("\n            "+e._s(l.title?l.title:"")+"\n            "),l.icon?i("v-icon",e._b({},"v-icon",l.iconProps,!1),[e._v(e._s(l.icon))]):e._e()],1)})),1):e._e()]}}})),{key:"label",fn:function(t){var l=t.item;return[i("div",{staticClass:"d-flex flex column"},[i("div",{staticClass:"d-flex flex-row justify-space-between align-center"},[e.decorator.icon?i("v-icon",[e._v(e._s())]):e._e(),i("label",[e._v(e._s(e.getLabel(l)))])],1)])]}}],null,!0)},"v-treeview",e.field.props,!1)),i("v-navigation-drawer",e._b({attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},"v-navigation-drawer",e.drawerProps,!1),[e.currentAction?i("vf-fields-renderer",e._b({attrs:{"on-updated":e.currentAction.onUpdated,fields:e.currentAction.fields},model:{value:e.currentActionValue,callback:function(t){e.currentActionValue=t},expression:"currentActionValue"}},"vf-fields-renderer",e.currentActionProps,!1)):e._e()],1)],1)],1)},staticRenderFns:[]},void 0,{components:{confirm:T},mixins:[M],name:"vf-group-treeview",props:{field:Object,id:String,value:{type:Array,default:()=>[]}},data(){return{menuX:0,menuY:0,menu:!1,drawer:!1,currentAction:null,currentActionItem:null,actionName:null,actionSlots:["append","prepend"],devalue:this.value,pauseWatch:!1}},computed:{drawerProps:function(){return{...this.field.drawerProps?this.field.drawerProps:{},...this.currentAction&&this.currentAction.drawerProps?this.currentAction.drawerProps:{}}},decorator:function(){return{id:this.field.decorator?this.field.decorator.id:"id",title:this.field.decorator?this.field.decorator.title:"title",label:this.field.decorator?this.field.decorator.label:":id#:title",...this.field.decorator}},currentActionValue:{get(){return this.currentActionItem.value[this.actionName]},set(e){this.currentActionItem.value[this.actionName]=e}},currentActionProps:function(){return{...this.field.formProps,...this.currentActionItem.formProps}}},methods:{onActionClicked:function(e,t,i,l,s){switch(i.type){case"formjson":s.value||(s.value={[l]:{}}),s.value[l]||(s.value[l]={}),this.currentActionItem=s,this.currentAction=i,this.actionName=l,this.$nextTick(()=>{this.drawer=!0});break;case"menu":s.value||(s.value={[l]:{}}),s.value[l]||(s.value[l]={}),this.currentActionItem=s,this.currentAction=i,this.actionName=l,this.menuX=e.clientX,this.menuY=e.clientY,this.$nextTick(()=>{this.menu=!0});break;case"confirm":this.currentActionItem=s,this.currentAction=i,this.actionName=l,this.$refs.confirm.open(i.confirm?i.confirm:"Yes",i.message?i.message:"Are you sure?",i.dialogProps?i.dialogProps:{color:"red"}).then(e=>{i.callback&&i.callback(e)});break;case"button":i.click?i.click(e):i.props&&i.props.click&&i.props.click(e)}},getLabel:function(e){const t=this.decorator;let i=t.label;for(const l in t)i=i.replace(":"+l,this.getNestedPathValue(e,t[l]));return i}},watch:{value:function(){this.devalue=this.value},devalue:{deep:!0,handler(){console.log("update",this.value),this.$emit("input",this.devalue)}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),de={[n.name]:n,[z.name]:z,[q.name]:q,[Q.name]:Q,[X.name]:X,[D.name]:D,[H.name]:H,[Y.name]:Y,[B.name]:B,[G.name]:G,[U.name]:U,[L.name]:L,[J.name]:J,[K.name]:K,[W.name]:W,[Z.name]:Z,[le.name]:le,[se.name]:se,[oe.name]:oe,[ne.name]:ne,[ae.name]:ae,[re.name]:re,[N.name]:N},ce=[];for(const e in de)if(de[e].name){const t=de[e].name.split("-");if("vf"===t[0]){const i=t.splice(1);i[0]=i[0].slice(0,1).toUpperCase()+i[0].slice(1),ce.push({id:de[e].name,title:i.join(" "),editor:de[e].editor})}}ce.push({id:"group",title:"Group"});var pe={install(e,t){!function(e,t){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.component(i,t[i])}(e,de)},VFTextInput:D,VuetifyFormJSON:n,VFColorInput:B,VFButtonGroupInput:U,VFSelectInput:L,VFRangeInput:J,VFSwitchInput:G,VFJSONInput:z,VFCheckboxInput:K,VFObjectsListInput:W,VFRadioGroupInput:q,VFBitwiseFlagsInput:Q,VFImageUploadInput:Z,VFDatatableInput:le,VFButtonInput:se,VFGroupSingleExpansion:ne,VFGroupExpansion:oe,VFGroupTabs:ae,VFGroupTreeview:re,VFFormBuilder:N,ComponentsObjectList:ce};var ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function l(e,t){if(!l.installed){if(l.installed=!0,!t)return void console.error("You have to install axios");e.axios=t,Object.defineProperties(e.prototype,{axios:{get:function(){return t}},$http:{get:function(){return t}}})}}"object"==i(t)?e.exports=l:window.Vue&&window.axios&&Vue.use(l,window.axios)}()}));function ve(e,t){ve.installed||(ve.installed=!0,pe.install(e),t&&t.withoutAxios||e.use(ue,l))}const fe={install:ve,Components:pe};let he=null;"undefined"!=typeof window?he=window.Vue:"undefined"!=typeof global&&(he=global.Vue),he&&he.use(fe);export default fe;export{ve as install};
